{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACZC,OAAQC,SAASC,cAAc,SAC/BC,UAAWF,SAASC,cAAc,oBAE7BE,EAAO,CAEZC,WAAY,EACZC,UAAW,EACXC,YAAa,GA4Cd,SAASC,EAAcC,EAAUC,GAChC,MAAMC,EAAgBC,KAAKC,SAAW,GACtC,OAAO,IAAIC,SAAQ,CAACC,EAAKC,KACxBC,YAAW,KACNN,EAEHI,EAAI,C,SAAEN,E,MAAUC,IAGhBM,EAAI,C,SAAEP,E,MAAUC,GAAQ,GAEvBA,EAAM,G,CAnDXX,EAAKC,OAAOkB,iBAAiB,UAiB7B,SAAsBC,GACrBA,EAAEC,iBACFrB,EAAKI,UAAUkB,UAAW,EAC1B,IAAIC,EAAYlB,EAAKC,WACrB,IAAK,IAAIkB,EAAI,EAAGA,EAAInB,EAAKG,YAAagB,GAAK,EAC1Cf,EAAce,EAAI,EAAGD,GACnBE,MAAK,EAACf,SAAEA,EAAQC,MAAEA,MAClBb,EAAA4B,OAAOC,QAAQ,uBAAqBjB,QAAiBC,OACjDD,IAAaL,EAAKG,cACrBR,EAAKI,UAAUkB,UAAW,EAAK,IAGhCM,OAAM,EAAClB,SAAEA,EAAQC,MAAEA,MACnBb,EAAA4B,OAAOG,QAAQ,sBAAoBnB,QAAeC,OAC9CD,IAAaL,EAAKG,cACrBR,EAAKI,UAAUkB,UAAW,EAAK,IAGlCC,GAAalB,EAAKE,S,IAlCpBP,EAAKC,OAAOkB,iBAAiB,UAI7B,SAAsBC,GACC,UAAlBA,EAAEU,OAAOC,OACZ1B,EAAKC,WAAa0B,OAAOZ,EAAEU,OAAOG,QAEb,SAAlBb,EAAEU,OAAOC,OACZ1B,EAAKE,UAAYyB,OAAOZ,EAAEU,OAAOG,QAEZ,WAAlBb,EAAEU,OAAOC,OACZ1B,EAAKG,YAAcwB,OAAOZ,EAAEU,OAAOG,O","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst refs = {\n\tformEl: document.querySelector('.form'),\n\tsubmitBtn: document.querySelector('[type = submit]')\n}\nconst data = {\n\t// isCount: false,\n\tdelayValue: 0,\n\tstepValue: 0,\n\tamountValue: 0,\n}\n\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.formEl.addEventListener('change', onFormChange);\n\n\n\nfunction onFormChange(e) {\n\tif (e.target.name === 'delay') {\n\t\tdata.delayValue = Number(e.target.value);\n\t}\n\tif (e.target.name === 'step') {\n\t\tdata.stepValue = Number(e.target.value);\n\t}\n\tif (e.target.name === 'amount') {\n\t\tdata.amountValue = Number(e.target.value);\n\t}\n}\n\nfunction onFormSubmit(e) {\n\te.preventDefault();\n\trefs.submitBtn.disabled = true;\n\tlet saveDelay = data.delayValue;\n\tfor (let i = 0; i < data.amountValue; i += 1) {\n\t\tcreatePromise(i + 1, saveDelay)\n\t\t\t.then(({ position, delay }) => {\n\t\t\t\tNotify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n\t\t\t\tif (position === data.amountValue) {\n\t\t\t\t\trefs.submitBtn.disabled = false;\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(({ position, delay }) => {\n\t\t\t\tNotify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n\t\t\t\tif (position === data.amountValue) {\n\t\t\t\t\trefs.submitBtn.disabled = false;\n\t\t\t\t}\n\t\t\t});\n\t\tsaveDelay += data.stepValue;\n\t}\n\t\n}\n\nfunction createPromise(position, delay) {\n\tconst shouldResolve = Math.random() > 0.3;\n\treturn new Promise((res, rej) => {\n\t\tsetTimeout(() => {\n\t\t\tif (shouldResolve) {\n\t\t\t\t// Fulfill\n\t\t\t\tres({ position, delay });\n\t\t\t} else {\n\t\t\t\t// Reject\n\t\t\t\trej({ position, delay });\n\t\t\t}\n\t\t}, delay);\n\t})\n}\n"],"names":["$iQIUW","parcelRequire","$47d4ff9957288465$var$refs","formEl","document","querySelector","submitBtn","$47d4ff9957288465$var$data","delayValue","stepValue","amountValue","$47d4ff9957288465$var$createPromise","position","delay","shouldResolve","Math","random","Promise","res","rej","setTimeout","addEventListener","e","preventDefault","disabled","saveDelay","i","then","Notify","success","catch","failure","target","name","Number","value"],"version":3,"file":"03-promises.089f4123.js.map"}